<html>
<head>
<title>A/V Remote Control</title>
<link href="{{ url_for('static', filename='remote.css') }}" rel="stylesheet" type="text/css">
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

</head>
<body>
<table>
<tr>
<td>
<div class="range-slider">
<input id="volume-slider" class="input-range" orient="vertical" type="range" step="1" value="25" min="1" max="100">
</div>
</td>
<td>
<center>
<button>Mute</button><br>
<button>LCDs On</button><br>
<hr>
<button>FM Radio</button><br>
<button>ChromeCast</button><br>
<button>AppleTV</button><br>
<button>Table HDMI</button><br>
</center>
</td>
</tr>
</table>

<script type="text/javascript">

<!--
'use strict';

var volume_slider = $('#volume-slider');

function set_interface_from_status(status)
{
    volume_slider.val(status['volume']);
}

function set_volume(value)
{
    $.ajax({
        type:"PUT",
        beforeSend: function (request)
        {
            //request.setRequestHeader("Authority", authorizationToken);
            request.setRequestHeader("Content-type","application/json");
            request.setRequestHeader("Accept","application/json");
        },
        url: /* APP.event_base_url + */ "set/volume",
        data: JSON.stringify({'value': value}),
        processData: false,
        success: function(data, status, xhr) {
            console.log("success")
        }
    });
}
    
volume_slider.on('input', function(){
    console.log("set volume " + this.value);
    set_volume(this.value);
});

var startup_status_json = '{{ startup_status|safe }}';

var startup_status = JSON.parse(startup_status_json);

set_interface_from_status(startup_status);

// -->
</script>

</body>
</html>
